<!doctype html>

<html lang="pl">
<head>
<title>Programowanie Gier 2D Mateusz J.</title>
  <meta charset="utf-8">
  <meta name="description" content="Zrealizowanie gry w ramach zadania Animacja 1.">
  <meta name="author" content="Mateusz Janiak">
</head>

<body>
    <a href="index.html">Wroc</a><br/>

    <canvas id="bubbleGame" width="800" height="600" style="border:2px solid #d3d3d3;"> </canvas><br />
    <script>
        // helper functions

        // generate rgb string from integer values
        function rgb(r, g, b){
            return "rgb("+r+","+g+","+b+")";
        }

        // change color
        function setColor(ctx, color) {
            ctx.fillStyle = color;
            ctx.fill();
        }

        // arrow listener
        function keyCallback(event)
        {
            switch (event.key) {
                case "ArrowLeft":
                    refreshRect(-1)
                    break;
                case "ArrowRight":
                    refreshRect(1)
                    break;
            }
        }

        // refresh rectange image
        function refreshRect(sign)
        {
            const diff = 10;
            canvas.width = canvas.width;
            rectPositionX = rectPositionX + diff * sign;
            rect = rectCtx.rect(rectPositionX, rectPositionY, rectWidth, rectHeight);
            setColor(rectCtx, rectColor);
            rectCtx.fill();
        }

        // create bullets params and define shot loop
        function startShooting()
        {
            var arcCtx = canvas.getContext("2d");
            const arcColor = rgb(0, 0, 180);
            const radius = canvas.offsetWidth / 40.0;
            arc = arcCtx.arc(canvas.offsetWidth / 2.0, canvas.offsetHeight / 2.0, radius, 0, 2 * Math.PI);
            setColor(arcCtx, arcColor);
            arcCtx.fill();
        }

        // define canvas and create context
        var canvas = document.getElementById("bubbleGame");
        var rectCtx = canvas.getContext("2d");

        // define rectangle params
        const rectColor = rgb(231, 123, 132);
        const rectWidth = canvas.offsetWidth / 8.0;
        const rectHeight = canvas.offsetWidth / 40.0;
        const rectPositionY = canvas.offsetHeight - rectHeight;
        var rectPositionX = canvas.offsetWidth / 2.0 - rectWidth / 2.0;

        // create rectangle
        rect = rectCtx.rect(rectPositionX, rectPositionY, rectWidth, rectHeight);
        setColor(rectCtx, rectColor);
        rectCtx.stroke();

        // register events
        window.addEventListener('keydown', this.keyCallback, event)

        // set up shooter
        startShooting(canvas)

    </script>
</body>
</html>
